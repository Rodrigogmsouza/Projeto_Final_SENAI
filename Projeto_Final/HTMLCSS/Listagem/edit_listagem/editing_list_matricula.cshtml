@using Projeto_Final.CSHARP;
@{
    BancoDeDados.DBConnect();

    matricula mat = new matricula();

    mat.idmatricula = Request.Form["matid"];

    string idmat = "";
    string idaluno = "";
    string idturma = "";

    List<matricula> lista_mat = Funcoes.listing_mat(mat);
    foreach (matricula matriculados in lista_mat)
    {
        idmat = matriculados.idmatricula;
        idaluno = matriculados.idaluno;
        idturma = matriculados.idturma;
    }

    matricula Matricula = new matricula();
    Matricula.idmatricula = Request.Form["matid"];
    Matricula.idaluno = Request.Form["idaluno"];
    Matricula.idturma = Request.Form["idturma"];

    if (Matricula.idmatricula == null)
    {
        Matricula.idmatricula = idmat;
    }
    if (Matricula.idaluno == null)
    {
        Matricula.idaluno = idaluno;
    }
    if (Matricula.idturma == null)
    {
        Matricula.idturma = idturma;
    }

    Funcoes.editmat(Matricula);
    <text>
        <script>
            window.location.href = "/HTMLCSS/Listagem/listagem_matriculas.cshtml";
        </script>
    </text>
}