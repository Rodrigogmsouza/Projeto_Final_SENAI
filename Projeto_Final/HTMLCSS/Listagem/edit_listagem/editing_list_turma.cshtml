@using Projeto_Final.CSHARP;
@{
    BancoDeDados.DBConnect();

    turma tma = new turma();

    tma.idturma = Request.Form["turmaid"];

    string idtma = "";
    string curso = "";
    string turno = "";
    string idsala = "";
    string idfessor = "";

    List<turma> listaturmas = Funcoes.listing_turma(tma);
    foreach (turma turmas in listaturmas)
    {
        idtma = turmas.idturma;
        curso = turmas.nome_curso;
        turno = turmas.turno;
        idsala = turmas.idsala;
        idfessor = turmas.idprofe;
    }

    turma Turma = new turma();
    Turma.idturma = Request.Form["turmaid"];

    Turma.nome_curso = Request.Form["nomeid"];

    Turma.turno = Request.Form["turno"];

    Turma.idsala = Request.Form["sala"];

    Turma.idprofe = Request.Form["professor"];

    if (Turma.idturma == null)
    {
        Turma.idturma = idtma;
    }
    if (Turma.nome_curso == "")
    {
        Turma.nome_curso = curso;
    }
    if (Turma.turno == "")
    {
        Turma.turno = turno;
    }
    if (Turma.idsala == null)
    {
        Turma.idsala = idsala;
    }
    if (Turma.idprofe == null)
    {
        Turma.idprofe = idfessor;
    }

    Funcoes.editturma(Turma);

    <text>
        <script>
            window.location.href = "/HTMLCSS/Listagem/listagem_turma.cshtml";
        </script>
    </text>

    }